{
    "description": "Wiz Package Definition Schema.",
    "type": "object",
    "properties": {
        "identifier": {
            "description": "Unique identifier for the definition.",
            "type": "string"
        },
        "description": {
            "description": "Description of the definition.",
            "type": "string"
        },
        "version": {
            "description": "Version of the definition.",
            "anyOf": [
                {"type": "string"},
                {"type": "version"}
            ]
        },
        "auto-use": {
            "description": "Indicate whether the definition should be used implicitly.",
            "type": "boolean",
            "default": false
        },
        "disabled": {
            "description": "Indicate whether the definition can be discover.",
            "type": "boolean",
            "default": false
        },
        "registry": {
            "description": "Full path to the registry in which the definition file has been found.",
            "type": "string"
        },
        "definition-location": {
            "description": "Path to the definition file.",
            "type": "string"
        },
        "install-root": {
            "description": "Root path of the install location for the package data.",
            "type": "string"
        },
        "install-location": {
            "description": "Install location to the package data.",
            "type": "string"
        },
        "namespace": {
            "description": "Namespace of the definition.",
            "type": "string"
        },
        "system": {
            "description": "System constraints limiting the scope of the definition.",
            "type": "object",
            "properties": {
                "platform": {
                    "description": "Platform identifier compatible with the definition.",
                    "type": "string"
                },
                "os": {
                    "description": "Operating system requirement compatible with the definition.",
                    "type": "string"
                },
                "arch": {
                    "description": "Architecture compatible with the definition.",
                    "type": "string"
                }
            },
            "additionalProperties": false,
            "minProperties": 1
        },
        "command": {
            "description": "Mapping of commands that can be exposed for this definition.",
            "type": "object",
            "minProperties": 1,
            "additionalProperties": {"type": "string"}
        },
        "environ": {
            "description": "Mapping of environment variables.",
            "type": "object",
            "minProperties": 1,
            "additionalProperties": {"type": "string"}
        },
        "requirements": {
            "description": "List of package requirement ordered by priority needed by the definition.",
            "type": "array",
            "minItems": 1,
            "uniqueItems": true,
            "items": {
                "anyOf": [
                    {"type": "string"},
                    {"type": "requirement"}
                ]
            }
        },
        "conditions": {
            "description": "List of preliminary conditions to use the definition.",
            "type": "array",
            "minItems": 1,
            "uniqueItems": true,
            "items": {
                "anyOf": [
                    {"type": "string"},
                    {"type": "requirement"}
                ]
            }
        },
        "constraints": {
            "description": "List of package constraints imposed by the definition.",
            "type": "array",
            "minItems": 1,
            "uniqueItems": true,
            "items": {
                "anyOf": [
                    {"type": "string"},
                    {"type": "requirement"}
                ]
            }
        },
        "variants": {
            "description": "List of ordered mapping which define variation of the definition.",
            "type": "array",
            "minItems": 1,
            "uniqueItems": true,
            "items": {
                "type": "object",
                "properties": {
                    "identifier": {
                        "description": "Unique identifier for the definition variant.",
                        "type": "string"
                    },
                    "install-location": {
                        "description": "Install location to the package data.",
                        "type": "string"
                    },
                    "command": {
                        "description": "Mapping of commands that can be exposed for this definition variant.",
                        "type": "object",
                        "minProperties": 1,
                        "additionalProperties": {"type": "string"}
                    },
                    "environ": {
                        "description": "Mapping of environment variables for this definition variant.",
                        "type": "object",
                        "minProperties": 1,
                        "additionalProperties": {"type": "string"}
                    },
                    "requirements": {
                        "description": "List of package requirement ordered by priority needed by the definition variant.",
                        "type": "array",
                        "minItems": 1,
                        "uniqueItems": true,
                        "items": {
                            "anyOf": [
                                {"type": "string"},
                                {"type": "requirement"}
                            ]
                        }
                    }
                },
                "required": ["identifier"],
                "additionalProperties": false
            }
        }
    },
    "wiz-constraint": {
        "description": "Wiz version constraint for definition to be used.",
        "anyOf": [
            {"type": "string"},
            {"type": "requirement"}
        ]
    },
    "required": ["identifier"],
    "additionalProperties": false
}
